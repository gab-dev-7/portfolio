---
import Section from "../Section.astro";
import { projects } from "@cv";
import { Icon } from "astro-icon/components";
---

<Section className={Astro.props.className}>
  <div class="grid grid-cols-1 gap-3 md:grid-cols-2 print:flex print:flex-col">
    {
      projects.map(({ url, description, highlights, name, isActive, github }) => {
        return (
          <div role="contentinfo" class="grid-span-1 ring-skin-muted relative flex flex-col rounded-md bg-skin-button-muted/50 p-5 shadow-sm ring-1 transition-all hover:ring-skin-accent hover:bg-skin-button-muted">
            <div class="flex items-center justify-between space-x-2">
              <div class="flex items-center space-x-2">
                <a
                  href={url}
                  title={`Ver ${name}`}
                  class="group flex items-center gap-[6px] text-lg font-bold decoration-dotted underline-offset-[5px] hover:text-skin-accent hover:underline"
                >
                  {name}
                  {isActive && (
                    <span class="relative flex h-2 w-2">
                      <span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex h-2 w-2 rounded-full bg-green-500"></span>
                    </span>
                  )}
                </a>
              </div>

              {github && (
                <a
                  href={github}
                  title="View source code on GitHub"
                  target="_blank"
                  rel="noopener"
                  class="opacity-75 transition-opacity duration-100 hover:opacity-100"
                >
                  <Icon name="github" width={20} height={20} />
                </a>
              )}
            </div>

            <p class="mt-2 text-sm text-skin-muted">{description}</p>

            <ul class="mt-4 flex flex-wrap gap-2">
              {highlights.map((highlight) => {
                return (
                  <li class="rounded-md bg-skin-button-accent/10 px-2 py-1 text-xs font-medium text-skin-accent ring-1 ring-inset ring-skin-accent/20">
                    {highlight}
                  </li>
                );
              })}
            </ul>
          </div>
        );
      })
    }
  </div>
</Section>
